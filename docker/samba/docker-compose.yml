version: "3.5"

services:

  samba:
    image: dperson/samba
    container_name: samba
    restart: unless-stopped
    ports:
      - "137:137/udp"
      - "138:138/udp"
      - "139:139/tcp"
      - "445:445/tcp"
    environment:
      USERID: '1000'
      GROUPID: '1000'
      TZ: "${GENERAL_TIMEZONE}"
    tmpfs:
      - /tmp
    volumes:
      - ${SAMBA_MOUNT_PATH}:/mnt:z
    command: '-s "homeserver;/mnt;yes;no;no;${SAMBA_USERNAME}" -u "${SAMBA_USERNAME};${SAMBA_PASSWORD}" -p'